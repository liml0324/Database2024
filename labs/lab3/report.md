# <center> 教师教学科研登记系统 </center>
## <center> 系统设计与实现报告 </center><br><br><br><br>

<center> 姓名：李牧龙 </center><br>
<center> 学号：PB21111639 </center><br>
<center> 计算机科学与技术学院 </center><br>
<center> 中国科学技术大学 </center><br>
<center> 2024年6月 </center><br>

# 1 需求分析
## 1.1 系统目标
开发一个面向教师的教学科研登记系统，实现教师的发表论文、承担项目、教学任务、的增删查改功能，同时提供对给定时间段内的教师科研教学工作量的统计功能。

## 1.2 需求说明
1. **论文管理**：提供教师论文发表信息的的增、删、改、查功能；输入时要求检查：一篇论文只能有一位通讯作者，论文的作者排名不能有重复，论文的类型和级别只能在约定的取值集合中选取。
2. **项目管理**：提供教师承担项目信息的增、删、改、查功能；输入时要求检查：排名不能有重复，一个项目中所有教师的承担经费总额应等于项目的总经费，项目类型只能在约定的取值集合中选取。
3. **课程管理**：提供教师主讲课程信息的增、删、改、查功能；输入时要求检查：一门课程所有教师的主讲学时总额应等于课程的总学时，学期。
4. **统计查询**：实现按教师工号和给定年份范围汇总查询该教师的教学科研情况的功能；例如输入工号“01234”，“2023-2023”可以查询 01234 教师在 2023 年度的教学科研工作情况，以及将查询结果导出为pdf。

# 2 总体设计
## 2.1 系统模块结构
架构图如下：
![alt text](<report_src/系统架构图 (1).png>)
系统采用B/S架构设计，用户通过浏览器访问系统。浏览器与Web服务器间交换请求与页面数据，Web服务器通过SQL与数据库交互。系统的主要功能模块均在Web服务器上实现。

### 2.1.1 网页渲染模块
即通常的网页后端，用Python中的Flask框架实现。这一部分接收用户请求，将请求信息提取出来，调用数据库管理模块的接口，获取数据，然后将数据渲染到网页上，返回给用户。返回给前端的页面使用Bootstrap框架进行美化。
另外，为方便用户使用，除实现基本的四部分功能需要的四个页面外，系统还额外提供了查询所有课程和教师信息的页面（这两部分数据不能增删改，只能查询）

### 2.1.2 数据库管理模块
这一模块是网页后端与数据库之间的桥梁，用于处理数据库的增删改查操作。这一模块同样使用Python，通过pymysql库与数据库进行交互。其中有论文模块、项目模块、课程模块、教师模块、统计模块四个子模块，分别处理论文、项目、课程的增删改查操作、教师信息查询和统计查询。

- 论文模块：提供对发表论文信息进行增删查改的接口。
- 项目模块：提供对承担项目信息进行增删查改的接口。
- 课程模块：提供对主讲课程信息进行增删查改的接口，以及查询所有课程信息的接口。
- 教师模块：提供查询所有教师信息的接口。
- 统计模块：提供对教师工号和给定年份范围汇总查询该教师的教学科研情况的接口，以及将查询结果导出为pdf的接口。

## 2.2 系统工作流程
流程图如下：
![alt text](report_src/系统流程图.png)
其中对发表论文、承担项目、主讲课程信息的操作过程非常类似，因此合并到一起。另外，四个模块对应的页面均可以通过链接进入查询所有课程和教师信息的页面，因此也合并到一起。

## 2.3 数据库设计
实验文档中已给出ER图：
![alt text](report_src/image.png)

最终数据库结构中一共7个表：
教师(<u>工号</u>, 姓名, 性别, 职称)
论文(<u>序号</u>, 论文名称, 发表源, 发表年份, 类型, 级别)
项目(<u>项目号</u>, 项目名称, 项目来源, 项目类型, 总经费, 开始年份, 结束年份)
课程(<u>课程号</u>, 课程名称, 学时数, 课程性质)
发表论文(<u>工号, 序号</u>, 排名, 是否通讯作者)
承担项目(<u>工号, 项目号</u>, 排名, 承担经费)
主讲课程(<u>工号, 课程号, 年份, 学期</u>, 承担学时)
其中带有下划线的是主码。

外键依赖有：
发表论文(工号) -> 教师(工号)
发表论文(序号) -> 论文(序号)
承担项目(工号) -> 教师(工号)
承担项目(项目号) -> 项目(项目号)
主讲课程(工号) -> 教师(工号)
主讲课程(课程号) -> 课程(课程号)

系统中没有使用存储过程、触发器，所有功能均在应用层通过Python实现。

# 3 详细设计

# 4 实现与测试